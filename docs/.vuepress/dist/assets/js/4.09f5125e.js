(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{202:function(t,s,a){t.exports=a.p+"assets/img/memory-cycle.929edd32.jpg"},203:function(t,s,a){t.exports=a.p+"assets/img/memory-type.5c834fdb.jpg"},210:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h3",{attrs:{id:"_1-内存的生命周期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-内存的生命周期"}},[t._v("#")]),t._v(" 1.内存的生命周期")]),t._v(" "),n("p",[n("img",{attrs:{src:a(202),alt:"内存的生命周期"}})]),t._v(" "),n("ul",[n("li",[t._v("内存的分配：当我们生命变量、对象时候，系统会自动为他们分配内存。")]),t._v(" "),n("li",[t._v("内存的使用：即读写内存，也就是使用变量，对象等。")]),t._v(" "),n("li",[t._v("内存的销毁：使用完毕，由垃圾回收机制回收不在使用该内存。")])]),t._v(" "),n("h3",{attrs:{id:"_2-内存的分类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-内存的分类"}},[t._v("#")]),t._v(" 2.内存的分类")]),t._v(" "),n("p",[n("img",{attrs:{src:a(203),alt:"堆与栈"}})]),t._v(" "),n("ul",[n("li",[t._v("栈：开口向上，先进后出，速度快，容量小。")]),t._v(" "),n("li",[t._v("堆：速队稍慢，容量大。")])]),t._v(" "),n("h3",{attrs:{id:"_3-js中不同数据类型在内存中如何存储？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-js中不同数据类型在内存中如何存储？"}},[t._v("#")]),t._v(" 3.js中不同数据类型在内存中如何存储？")]),t._v(" "),n("ul",[n("li",[n("router-link",{attrs:{to:"/node/01base/dataType.html"}},[t._v("引用类型")]),t._v("存堆内存")],1),t._v(" "),n("li",[n("router-link",{attrs:{to:"/node/01base/dataType.html"}},[t._v("基础类型")]),t._v("存栈内存")],1),t._v(" "),n("li",[t._v("常量存池内存，池也被归类到堆中")])]),t._v(" "),n("h3",{attrs:{id:"_4-js中不同数据类型的内存释放-垃圾回收-机制是怎样？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-js中不同数据类型的内存释放-垃圾回收-机制是怎样？"}},[t._v("#")]),t._v(" 4.js中不同数据类型的内存释放(垃圾回收)机制是怎样？")]),t._v(" "),n("ul",[n("li",[n("router-link",{attrs:{to:"/node/01base/dataType.html"}},[t._v("引用类型")]),t._v("(对象类型)在不被变量引用时会被V8的GC自动回收。")],1),t._v(" "),n("li",[n("router-link",{attrs:{to:"/node/01base/dataType.html"}},[t._v("基础类型")]),t._v("如果在闭包的状态下，要等闭包没被引用了才会被GC回收，非闭包的情况下V8的新生代(new space)切换时会被GC回收。")],1)]),t._v(" "),n("h3",{attrs:{id:"_5-gc-garbage-collection-回收机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-gc-garbage-collection-回收机制"}},[t._v("#")]),t._v(" 5.GC(garbage collection)回收机制")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://juejin.im/post/5d0706a6f265da1bc23f77a9#heading-7",target:"_blank",rel:"noopener noreferrer"}},[t._v("引用计数垃圾收集"),n("OutboundLink")],1),t._v(": 当一个象已经没有另一个对象引用指向他时，他会被回收。")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.im/post/5d0706a6f265da1bc23f77a9#heading-8",target:"_blank",rel:"noopener noreferrer"}},[t._v("标记清除算法"),n("OutboundLink")],1),t._v(":从根部root出发(浏览器环境下为window，Node环境下global)依次梳理对象的引用，如果能从引用链找到，则标记为"),n("strong",[t._v("可到达对象")]),t._v("，反之标记为"),n("strong",[t._v("不可到达对象")]),t._v("，不可到达对象(即不被引用对象)会被V8回收。")])]),t._v(" "),n("h3",{attrs:{id:"_6-如何避免内存泄漏"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-如何避免内存泄漏"}},[t._v("#")]),t._v(" 6.如何避免内存泄漏")]),t._v(" "),n("ul",[n("li",[t._v("避免声明全局变量。")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'全局声明'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 内存泄漏")]),t._v("\n\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'全局声明'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 内存泄漏")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ul",[n("li",[t._v("尽量少编写复杂度高的闭包，得知道闭包了什么对象，在适当的时候释放引用了闭包的对象。")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'局部声明'")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("inner")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 闭包inner引用了夫级fn函数中的变量，而inner是全局变量，a不会被GC回收，从而导致内存泄漏")]),t._v("\n")])])]),n("ul",[n("li",[t._v("绑定事件的时候，一定要在适当的时候取消绑定。编写一个类的时候，推荐用init函数对类的事件监听进行绑定与资源的申请，在destory函数对事件与资源的释放。")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Polygon")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("height"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" height\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" width\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      area"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width\n      cycle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("destory")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 声明并初始化")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("P1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Polygon")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 销毁")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("P1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("destoty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("a",{attrs:{href:"https://juejin.im/post/5d116a9df265da1bb47d717b#heading-12",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS中的栈内存堆内存"),n("OutboundLink")],1),n("br"),t._v(" "),n("a",{attrs:{href:"https://juejin.im/entry/5876018e128fe1006b4bda78",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS中的内存释放"),n("OutboundLink")],1),n("br"),t._v(" "),n("a",{attrs:{href:"https://juejin.im/post/5d0706a6f265da1bc23f77a9#heading-8",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS中的内存管理"),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);